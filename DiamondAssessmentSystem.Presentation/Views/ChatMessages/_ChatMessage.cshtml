@using DiamondAssessmentSystem.Infrastructure.Enums
@model DiamondAssessmentSystem.Application.DTO.ChatLogDTO

@{
    var isFile = Model.MessageType == MessageType.Image || Model.MessageType == MessageType.File;
    var isPending = Model.IsRead == false;
    var timestamp = Model.SentAt.ToLocalTime().ToString("g");
}

<div class="p-3 rounded-md border shadow-sm @(isPending ? "bg-gray-100 opacity-75" : "bg-white")">
    <div class="flex items-start space-x-2">
        <strong class="text-blue-600">@Model.SenderName (@Model.SenderRole)</strong>
        <div class="text-sm text-gray-800">
            @if (!isFile)
            {
                <span>@Model.Message</span>
            }
            else if (!string.IsNullOrEmpty(Model.FilePath))
            {
                <a href="@Model.FilePath" target="_blank" class="text-blue-500 underline">
                    📎 @Model.FileName
                </a>
            }
        </div>
    </div>
    <div class="text-xs text-gray-500 mt-1">
        @timestamp
        @if (isPending)
        {
            <span class="ml-2 text-yellow-600">⏳ Pending</span>
        }
    </div>
</div>
